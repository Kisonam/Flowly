# Flowly Backend Unit Tests - Summary

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–°—Ç–≤–æ—Ä–µ–Ω–æ –ø–æ–≤–Ω–∏–π –Ω–∞–±—ñ—Ä unit —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è backend —Å–µ—Ä–≤—ñ—Å—ñ–≤ Flowly –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º:
- **xUnit** - —Ç–µ—Å—Ç–æ–≤–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Moq** - –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–∫—ñ–≤
- **FluentAssertions** - –¥–ª—è –≤–∏—Ä–∞–∑–Ω–∏—Ö assertions
- **SQLite In-Memory** - –¥–ª—è —ñ–∑–æ–ª—å–æ–≤–∞–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ë–î

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç—ñ–≤

### AuthServiceTests (9 —Ç–µ—Å—Ç—ñ–≤)
- ‚úÖ –£—Å–ø—ñ—à–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –¥—É–±–ª—é–≤–∞–Ω–Ω—è email
- ‚úÖ –õ–æ–≥—ñ–Ω –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –ø–∞—Ä–æ–ª–µ–º
- ‚úÖ –õ–æ–≥—ñ–Ω –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ credentials
- ‚úÖ Refresh token - –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π —Ç–æ–∫–µ–Ω
- ‚úÖ Refresh token - –≤—ñ–¥–∫–ª–∏–∫–∞–Ω–∏–π —Ç–æ–∫–µ–Ω
- ‚úÖ –£—Å–ø—ñ—à–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É
- ‚úÖ –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è –≤—ñ–¥–∫–ª–∏–∫–∞—î –≤—Å—ñ —Ç–æ–∫–µ–Ω–∏
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —á—É–∂–∏–π refresh token

### NoteServiceTests (13 —Ç–µ—Å—Ç—ñ–≤)
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ—Ç–∞—Ç–∫–∏ –∑ –≤–∞–ª—ñ–¥–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ—Ç–∞—Ç–∫–∏ –∑ —Ç–µ–≥–∞–º–∏
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —á—É–∂—ñ —Ç–µ–≥–∏
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ (4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏ —á–µ—Ä–µ–∑ Theory)
- ‚úÖ –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è –Ω–æ—Ç–∞—Ç–∫–∏
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –Ω–æ—Ç–∞—Ç–æ–∫ –∑–∞ —Ç–µ–≥–∞–º–∏
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏–º –ø–æ—à—É–∫–æ–º
- ‚úÖ –Ü–∑–æ–ª—è—Ü—ñ—è –¥–∞–Ω–∏—Ö –º—ñ–∂ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ —á—É–∂—É –Ω–æ—Ç–∞—Ç–∫—É
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∞—Ä—Ö—ñ–≤–æ–≤–∞–Ω–∏—Ö –Ω–æ—Ç–∞—Ç–æ–∫
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è timestamp
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–Ω–æ–≤–∏—Ç–∏ —á—É–∂—É –Ω–æ—Ç–∞—Ç–∫—É
- ‚úÖ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è

### TaskServiceTests (14 —Ç–µ—Å—Ç—ñ–≤)
- ‚úÖ –ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ –º—ñ–∂ —Ç–µ–º–∞–º–∏
- ‚úÖ –ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –≤ null theme
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ –≤ —á—É–∂—É —Ç–µ–º—É
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è recurring task (—â–æ–¥–µ–Ω–Ω–∞)
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è recurring task —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É
- ‚úÖ Recurring task –∑ —Ç–∏–∂–Ω–µ–≤–∏–º —ñ–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
- ‚úÖ –î–æ–¥–∞–≤–∞–Ω–Ω—è subtask
- ‚úÖ –ü–æ—Ä—è–¥–æ–∫ subtasks
- ‚úÖ Toggle subtask
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –¥–æ–¥–∞—Ç–∏ subtask –¥–æ —á—É–∂–æ—ó –∑–∞–¥–∞—á—ñ
- ‚úÖ Recurring task –∫–ª–æ–Ω—É—î subtasks
- ‚úÖ –í–∏–¥–∞–ª–µ–Ω–Ω—è subtask
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è timestamp
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–Ω–æ–≤–∏—Ç–∏ —á—É–∂—É –∑–∞–¥–∞—á—É

### FinanceServiceTests (14 —Ç–µ—Å—Ç—ñ–≤)
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—É–º–∏ (3 –≤–∞—Ä—ñ–∞–Ω—Ç–∏ —á–µ—Ä–µ–∑ Theory)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ budget overspent
- ‚úÖ Income –∑–º–µ–Ω—à—É—î spent
- ‚úÖ –û–±—á–∏—Å–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö –∑ –≤—ñ–¥—Å–æ—Ç–∫–∞–º–∏
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —á—É–∂—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–∏–≤'—è–∑–∞—Ç–∏ –¥–æ —á—É–∂–æ–≥–æ –±—é–¥–∂–µ—Ç—É
- ‚úÖ –Ü–∑–æ–ª—è—Ü—ñ—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–∞–ª—é—Ç–∏
- ‚úÖ –ê—Ä—Ö—ñ–≤–æ–≤–∞–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –Ω–µ –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è
- ‚úÖ –°–µ—Ä–µ–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –∑–∞ –¥–µ–Ω—å
- ‚úÖ –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ —á—É–∂–∏–π –±—é–¥–∂–µ—Ç
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –ø–æ–∑–∞ –ø–µ—Ä—ñ–æ–¥–æ–º –Ω–µ –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è

## üéØ –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å: 50+ —Ç–µ—Å—Ç—ñ–≤

## üîí –§–æ–∫—É—Å –Ω–∞ –±–µ–∑–ø–µ—Ü—ñ

–í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–∏–¥—ñ–ª—è—é—Ç—å –æ—Å–æ–±–ª–∏–≤—É —É–≤–∞–≥—É:
- **–Ü–∑–æ–ª—è—Ü—ñ—ó –¥–∞–Ω–∏—Ö** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–µ –º–æ–∂—É—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —á—É–∂–∏—Ö –¥–∞–Ω–∏—Ö
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—ñ–≤
- **–ó–∞—Ö–∏—Å—Ç—É —Ç–æ–∫–µ–Ω—ñ–≤** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ refresh tokens, –≤—ñ–¥–∫–ª–∏–∫–∞–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –ø–∞—Ä–æ–ª—è
- **–ê—É–¥–∏—Ç—É** - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è IP –∞–¥—Ä–µ—Å –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –¥—ñ–π
- **–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** - –ø–∞—Ä–æ–ª—ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ plain text

## üõ†Ô∏è Helpers

### TestDbContextFactory
- `CreateInMemoryContext()` - SQLite In-Memory –±–∞–∑–∞ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É
- `CreateUserManager()` - –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π UserManager –¥–ª—è —Ç–µ—Å—Ç—ñ–≤
- `CreateSignInManager()` - SignInManager –¥–ª—è —Ç–µ—Å—Ç—ñ–≤

### TestDataSeeder
- `CreateTestUserAsync()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `CreateTestTagsAsync()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ–≥—ñ–≤
- `CreateTestCategoriesAsync()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- `CreateTestCurrencyAsync()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–∞–ª—é—Ç
- `CreateTestTaskThemeAsync()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ–º –¥–ª—è –∑–∞–¥–∞—á
- `CreateTestBudgetAsync()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç—ñ–≤

## üìù –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ

–ö–æ–∂–µ–Ω —Ç–µ—Å—Ç –º—ñ—Å—Ç–∏—Ç—å:
- –û–ø–∏—Å —â–æ —Ç–µ—Å—Ç—É—î—Ç—å—Å—è
- –ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ (–æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è –±–µ–∑–ø–µ–∫–∏)
- Arrange/Act/Assert —Å–µ–∫—Ü—ñ—ó –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏
- –ü–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–µ —Ç—ñ–ª—å–∫–∏ happy path, –∞–ª–µ –π edge cases

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –í—Å—ñ —Ç–µ—Å—Ç–∏
dotnet test

# –ó –¥–µ—Ç–∞–ª—å–Ω–∏–º –≤–∏–≤–æ–¥–æ–º
dotnet test --logger "console;verbosity=detailed"

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∫–ª–∞—Å
dotnet test --filter "FullyQualifiedName~AuthServiceTests"
```

## ‚ö†Ô∏è –ü—Ä–∏–º—ñ—Ç–∫–∞

–î–µ—è–∫—ñ —Ç–µ—Å—Ç–∏ –º–æ–∂—É—Ç—å –ø–∞–¥–∞—Ç–∏, —è–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –º–µ—Ç–æ–¥–∏ —â–µ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –≤ —Å–µ—Ä–≤—ñ—Å–∞—Ö. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - —Ç–µ—Å—Ç–∏ –Ω–∞–ø–∏—Å–∞–Ω—ñ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –º–∞–π–±—É—Ç–Ω—å–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ —Ç–∞ —Å–ª—É–∂–∞—Ç—å —è–∫ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ —Å–∏—Å—Ç–µ–º–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
tests/Flowly.UnitTests/
‚îú‚îÄ‚îÄ Helpers/
‚îÇ   ‚îú‚îÄ‚îÄ TestDbContextFactory.cs    # –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
‚îÇ   ‚îî‚îÄ‚îÄ TestDataSeeder.cs          # –î–æ–ø–æ–º—ñ–∂–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ AuthServiceTests.cs        # –¢–µ—Å—Ç–∏ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (9 —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ NoteServiceTests.cs        # –¢–µ—Å—Ç–∏ –Ω–æ—Ç–∞—Ç–æ–∫ (13 —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ TaskServiceTests.cs        # –¢–µ—Å—Ç–∏ –∑–∞–¥–∞—á (14 —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ FinanceServiceTests.cs     # –¢–µ—Å—Ç–∏ —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤ (14 —Ç–µ—Å—Ç—ñ–≤)
‚îú‚îÄ‚îÄ Flowly.UnitTests.csproj
‚îî‚îÄ‚îÄ README.md
```
