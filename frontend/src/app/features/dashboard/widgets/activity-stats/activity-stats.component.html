@if (stats) {
  <div class="activity-stats-grid">
    <!-- Active Tasks Block -->
    <div class="stat-block tasks clickable" (click)="navigateToTasks()">
      <div class="stat-icon">‚úÖ</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.activeTasksCount }}</h3>
        <p class="stat-label">{{ 'DASHBOARD.ACTIVITY_STATS.ACTIVE_TASKS' | translate }}</p>
      </div>
    </div>

    <!-- Notes Block -->
    <div class="stat-block notes clickable" (click)="navigateToNotes()">
      <div class="stat-icon">üìù</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.notesCount }}</h3>
        <p class="stat-label">{{ 'DASHBOARD.ACTIVITY_STATS.NOTES' | translate }}</p>
      </div>
    </div>

    <!-- Transactions Block -->
    <div class="stat-block transactions clickable" (click)="navigateToTransactions()">
      <div class="stat-icon">üí∞</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.transactionsCount }}</h3>
        <p class="stat-label">{{ 'DASHBOARD.ACTIVITY_STATS.TRANSACTIONS_MONTH' | translate }}</p>
      </div>
    </div>

    <!-- Productivity Block -->
    <div class="stat-block productivity" [style.--productivity-color]="getProductivityColor()">
      <div class="stat-icon">{{ getProductivityIcon() }}</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.productivityScore }}%</h3>
        <p class="stat-label">{{ 'DASHBOARD.ACTIVITY_STATS.PRODUCTIVITY' | translate }}</p>
        <span class="productivity-level">{{ stats.productivityLevel }}</span>
      </div>

      <!-- Productivity Breakdown Tooltip -->
      <div class="productivity-breakdown">
        <div class="breakdown-item">
          <span class="breakdown-label">{{ 'DASHBOARD.ACTIVITY_STATS.BREAKDOWN.TASK_COMPLETION' | translate }}</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.taskCompletionRate | number:'1.0-0' }}%</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">{{ 'DASHBOARD.ACTIVITY_STATS.BREAKDOWN.NOTES_ACTIVITY' | translate }}</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.notesActivityScore | number:'1.0-0' }}%</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">{{ 'DASHBOARD.ACTIVITY_STATS.BREAKDOWN.FINANCIAL_TRACKING' | translate }}</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.financialTrackingScore | number:'1.0-0' }}%</span>
        </div>
        <hr>
        <div class="breakdown-item">
          <span class="breakdown-label">{{ 'DASHBOARD.ACTIVITY_STATS.BREAKDOWN.TASKS_CREATED' | translate }}</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.tasksCreatedThisMonth }}</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">{{ 'DASHBOARD.ACTIVITY_STATS.BREAKDOWN.TASKS_COMPLETED' | translate }}</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.tasksCompletedThisMonth }}</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">{{ 'DASHBOARD.ACTIVITY_STATS.BREAKDOWN.NOTES_CREATED' | translate }}</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.notesCreatedThisMonth }}</span>
        </div>
      </div>
    </div>
  </div>
} @else {
  <div class="loading-state">
    <div class="spinner"></div>
    <p>{{ 'DASHBOARD.ACTIVITY_STATS.LOADING' | translate }}</p>
  </div>
}
