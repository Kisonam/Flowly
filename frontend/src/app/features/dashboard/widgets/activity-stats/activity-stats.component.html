@if (stats) {
  <div class="activity-stats-grid">
    <!-- Active Tasks Block -->
    <div class="stat-block tasks clickable" (click)="navigateToTasks()">
      <div class="stat-icon">‚úÖ</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.activeTasksCount }}</h3>
        <p class="stat-label">–ê–∫—Ç–∏–≤–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</p>
      </div>
    </div>

    <!-- Notes Block -->
    <div class="stat-block notes clickable" (click)="navigateToNotes()">
      <div class="stat-icon">üìù</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.notesCount }}</h3>
        <p class="stat-label">–ù–æ—Ç–∞—Ç–∫–∏</p>
      </div>
    </div>

    <!-- Transactions Block -->
    <div class="stat-block transactions clickable" (click)="navigateToTransactions()">
      <div class="stat-icon">üí∞</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.transactionsCount }}</h3>
        <p class="stat-label">–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (–º—ñ—Å—è—Ü—å)</p>
      </div>
    </div>

    <!-- Productivity Block -->
    <div class="stat-block productivity" [style.--productivity-color]="getProductivityColor()">
      <div class="stat-icon">{{ getProductivityIcon() }}</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats.productivityScore }}%</h3>
        <p class="stat-label">–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</p>
        <span class="productivity-level">{{ stats.productivityLevel }}</span>
      </div>

      <!-- Productivity Breakdown Tooltip -->
      <div class="productivity-breakdown">
        <div class="breakdown-item">
          <span class="breakdown-label">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å:</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.taskCompletionRate | number:'1.0-0' }}%</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –Ω–æ—Ç–∞—Ç–æ–∫:</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.notesActivityScore | number:'1.0-0' }}%</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –æ–±–ª—ñ–∫:</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.financialTrackingScore | number:'1.0-0' }}%</span>
        </div>
        <hr>
        <div class="breakdown-item">
          <span class="breakdown-label">–°—Ç–≤–æ—Ä–µ–Ω–æ –∑–∞–≤–¥–∞–Ω—å:</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.tasksCreatedThisMonth }}</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">–í–∏–∫–æ–Ω–∞–Ω–æ –∑–∞–≤–¥–∞–Ω—å:</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.tasksCompletedThisMonth }}</span>
        </div>
        <div class="breakdown-item">
          <span class="breakdown-label">–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ—Ç–∞—Ç–æ–∫:</span>
          <span class="breakdown-value">{{ stats.productivityBreakdown.notesCreatedThisMonth }}</span>
        </div>
      </div>
    </div>
  </div>
} @else {
  <div class="loading-state">
    <div class="spinner"></div>
    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>
  </div>
}
